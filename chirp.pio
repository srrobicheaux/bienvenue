.program chirp

; This program toggles a pin at 40kHz.
; Frequency is determined by the state machine clock divider.

.wrap_target
    pull block          ; Wait for a trigger from the CPU
    set x, 31           ; Send 32 pulses (800 microseconds)
    
pulse_loop:
    set pins, 5 [12]    ; Pin High, wait 12 cycles
    set pins, 0 [12]    ; Pin Low,  wait 12 cycles
    jmp x-- pulse_loop  ; Repeat 32 times
.wrap